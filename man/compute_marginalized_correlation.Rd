% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/analyze.R
\name{compute_marginalized_correlation}
\alias{compute_marginalized_correlation}
\title{Compute posterior correlation with flexible marginalisation}
\usage{
compute_marginalized_correlation(
  model1_draws,
  model2_draws,
  marginalize_over = "model_id"
)
}
\arguments{
\item{model1_draws, model2_draws}{Posterior draws for the two metrics to be
correlated. Must contain \code{.prob}, \code{.draw}, and the columns listed in
\code{marginalize_over}.}

\item{marginalize_over}{Character vector of variables to average over before
computing the correlation. Defaults to \code{"model_id"} (i.e. between-model
correlation).}
}
\value{
A tibble with the posterior median correlation and its credible
interval.
}
\description{
Provides a unified engine for computing Spearman correlations between two
sets of posterior draws, with optional marginalisation (averaging) over any
combination of grouping variables - e.g. \code{"model_id"} (default),
\code{c("model_id", "modality")}, or \code{c("item", "model_id", "modality")}.
}
\details{
For every posterior draw the function first collapses the probability
(\code{.prob}) by the variables supplied in \code{marginalize_over}. A correlation is
then computed across the resulting rows (i.e. across the unique combinations
of those variables). Finally these per-draw correlations are summarised with
\code{tidybayes::median_qi()}.
}
